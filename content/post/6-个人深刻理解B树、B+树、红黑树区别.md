+++
title = "6-个人深刻理解B树、B+树、红黑树区别"
date = 2020-04-12T15:50:10+01:00
lastmod = 2020-04-12T16:50:10+01:00
draft = false
tags = ["树"]
categories = ["树"]
type = ["archives"]
+++

# 6-个人深刻理解B树、B+树、红黑树区别

## 个人心得体会，切勿模仿

最近面试，总会被问道mysql索引，然后随之而来就是为什么用这种树而不用别的之类的问题，本来自己之前对这部分知识有所积累和了解，但是当面试完的时候，反思了一些，每次回答总有一些不完善的地方，遂整理记录下。以备参考。

### B树 B+树，
主要区别，
- 1. B树每个节点都会存储数据（比如是磁盘物理地址，或者就是数据本身），B+树每个节点不会存储数据，只存储索引，那么数据在哪存储呢？全部存储到了叶子节点。
- 2. 由1可知，这两种存储方式就会导致在查询和每页存储数据量以及整个结构多少多少都会有一些区别的。

   - 2.1 查询上，B树，查询某个数据，并不需要遍历完，整颗树，而只需要查询到索引本身就可以取出数据；B+树呢，就需要一直遍历到叶子节点，才会取出具体的数据，所以这就导致在时间复杂度上，B树的查询性能并不稳定，而B+树的查询性能则是稳定的。
  
   - 2.2 存储上，由于B树，每个节点都会存储数据，这就导致每页，存储的数据会相对减少（相对B+树），导致树高度增加，而B+树，每页则可以存储更多的数据，从而使树的高度降低，因为树的高度增加，就会导致磁盘IO次数增加，而磁盘IO又十分耗时，所以树的高度越低，就可以减少磁盘IO，对于查询性能的提升有非常大的帮助。
  
   - 2.3 叶子节点的存储方式不同，由于B树的存储方式，就导致B树结构存储是松散的，而B+树，所有的索引和数据都在叶子节点，所以B+树，通过在叶子节点增加链表，则可以使所有叶子节点形成了一个有序链表，这在范围查询和局部性上都提供了极大的遍历。

### 红黑树
红黑树是一个AVL树，在内存排序用的相对多些，而基本上不会在磁盘存储上使用，最主要的原因就是红黑树的高度很高，不适合磁盘这种的IO操作。还有修改树，有可能导致树的旋转分裂，对于磁盘操作成本也都很高。

还有一个小问题，是最近【https://www.cs.usfca.edu/~galles/visualization/Algorithms.html】 通过这个网站，可以直观的看到各种树的变化，实验了下红黑树的变化，发现如果是递增索引的话，前几次操作都是向右有倾斜的，不过毕竟是一颗平衡树，这个倒不是什么大问题。不过通过直观的看到，还是有一些收获的。





# Hello World!